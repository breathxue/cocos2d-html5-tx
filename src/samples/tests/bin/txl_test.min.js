function trace(){var b,c,d,e,a=[];for(b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];for(c="",d=0;d<a.length;d++)e=a[d],c+=e instanceof cc.Point?"("+e.x+","+e.y+")"+" ":e&&e.toString?e.toString()+" ":e+" ";console.log(c),logToServer(c)}function getCallStack(){for(var a=[],b=getCallStack;(b=b.caller)&&b;)if(a.push(b),a.length>10)return a;return a}function logToServer(a){var b=TC.getXmlHttp();if(null!=b)try{b.open("POST","http://192.168.189.93:3051/web/log?user=log&project="+TC.projectName,!0),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),b.send("msg="+a)}catch(c){TC.errorNum++}}function Trace(){var b,a=[];for(b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];trace(a)}function getQualifiedClassName(a){return a.getClassName()}function getDefinitionByName(name,module){return"undefined"==typeof module&&(module=null),null==module?eval(name+".prototype.constructor"):null!=name.indexOf(module)?eval(module+"."+name+".prototype.constructor"):eval(name+".prototype.constructor")}var tx,TC,__extends,s_HelloWorld,s_CloseNormal,s_CloseSelected,s_crystalsList,s_crystalsPng,s_gameAni_List,s_gameAni,g_resources,TestAttach,TestEvent,TestBitmap,testMovieClip,testInteractiveSprite,TestSharedObject,Root,Stage;!function(a){var b=function(){function b(a,b){"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=0),this.x=a,this.y=b}return b.prototype.setTo=function(a,b){this.x=a,this.y=b},b.prototype.copyFrom=function(a){return this.x=a.x,this.y=a.y,this},b.prototype.toString=function(){var a=Math.round(1e3*this.x)/1e3,b=Math.round(1e3*this.y)/1e3;return"["+a+","+b+"]"},b.prototype.clone=function(){return new b(this.x,this.y)},b.prototype.plus=function(a){return new b(this.x+a.x,this.y+a.y)},b.prototype.plusEquals=function(a){return this.x+=a.x,this.y+=a.y,this},b.prototype.minus=function(a){return new b(this.x-a.x,this.y-a.y)},b.prototype.minusEquals=function(a){return this.x-=a.x,this.y-=a.y,this},b.prototype.negate=function(){return new b(-this.x,-this.y)},b.prototype.negateEquals=function(){this.x=-this.x,this.y=-this.y},b.prototype.mult=function(a){return new b(this.x*a,this.y*a)},b.prototype.multEquals=function(a){return this.x*=a,this.y*=a,this},b.prototype.rotateAngle=function(c){var d=a.TF_Class.cosD(c),e=a.TF_Class.sinD(c),f=new b(this.x*d-this.y*e,this.y*d+this.x*e);return f},b.prototype.rotateAngleEquals=function(a){return this.copyFrom(this.rotateAngle(a))},b.prototype.rotateAngleForTarget=function(c,d){var e=this.minus(d),f=a.TF_Class.cosD(c),g=a.TF_Class.sinD(c),h=new b(e.x*f-e.y*g,e.y*f+e.x*g),i=h.plus(d);return i},b.prototype.rotateAngleForTargetEquals=function(a,b){return this.copyFrom(this.rotateAngleForTarget(a,b))},b.prototype.rotateRadian=function(a){var c=Math.cos(a),d=Math.sin(a),e=new b(this.x*c-this.y*d,this.y*c+this.x*d);return e},b.prototype.rotateRadianEquals=function(a){return this.copyFrom(this.rotateRadian(a))},b.prototype.rotateRadianForTarget=function(a,c){var d=this.minus(c),e=Math.cos(a),f=Math.sin(a),g=new b(d.x*e-d.y*f,d.y*e+d.x*f),h=g.plus(c);return h},b.prototype.rotateRadianForTargetEquals=function(a,b){return this.copyFrom(this.rotateRadianForTarget(a,b))},b.prototype.dot=function(a){return this.x*a.x+this.y*a.y},b.prototype.cross=function(a){return this.x*a.y-this.y*a.x},b.prototype.times=function(a){return new b(this.x*a,this.y*a)},b.prototype.div=function(a){return 0==a&&(a=1e-4),new b(this.x/a,this.y/a)},b.prototype.divEquals=function(a){return 0==a&&(a=1e-4),this.x/=a,this.y/=a,this},b.prototype.distance=function(a){var b=this.minus(a);return b.getLength()},b.prototype.normalize=function(){var a=this.getLength();return 0==a&&(a=1e-4),this.mult(1/a)},b.prototype.compare=function(a){return this.x==a.x&&this.y==a.y?!0:!1},b.prototype.getNormal=function(){return new b(-this.y,this.x)},b.prototype.isNormalTo=function(a){return 0==this.dot(a)},b.prototype.angleBetween=function(b){var c=this.dot(b),d=c/(this.getLength()*b.getLength());return a.TF_Class.acosD(d)},b.prototype.radianBetween=function(a){var b=this.dot(a)/(this.getLength()*a.getLength());return Math.acos(b)},b.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},b.prototype.setLength=function(a){var b=this.getLength();b?this.multEquals(a/b):this.x=a},b.prototype.setAngle=function(b){var c=this.getLength();this.x=c*a.TF_Class.cosD(b),this.y=c*a.TF_Class.sinD(b)},b.prototype.getAngle=function(){return a.TF_Class.atan2D(this.y,this.x)},b.PI_OVER_ONE_EIGHTY=Math.PI/180,b}();a.mVector=b}(tx||(tx={})),function(a){var b=function(){function a(){}return a.sinD=function(a){return Math.sin(a*Math.PI/180)},a.cosD=function(a){return Math.cos(a*Math.PI/180)},a.tanD=function(a){return Math.tan(a*Math.PI/180)},a.asinD=function(a){return Math.asin(a)*(180/Math.PI)},a.acosD=function(a){return Math.acos(a)*(180/Math.PI)},a.atanD=function(a){return Math.atan(a)*(180/Math.PI)},a.atan2D=function(a,b){return Math.atan2(a,b)*(180/Math.PI)},a.distance=function(a,b,c,d){var e=c-a,f=d-b;return Math.sqrt(e*e+f*f)},a.angleOfLine=function(b,c,d,e){return a.atan2D(e-c,d-b)},a.degreesToRadians=function(a){return a*(Math.PI/180)},a.radiansToDegrees=function(a){return a*(180/Math.PI)},a.fixAngle=function(a){return(a%=360)<0?a+360:a},a.cartesianToPolar=function(b){var c=Math.sqrt(b.x*b.x+b.y+b.y),d=a.atan2D(b.y,b.x);return{r:c,t:d}},a.FormatAngle=function(a){return a%=360,a>180&&(a-=360),-180>a&&(a+=360),a},a.FormatAngle90=function(a){return a%=180,a>90&&(a=180-a),-90>a&&(a+=180),a},a}();a.TF_Class=b}(tx||(tx={})),TC=function(){function a(){}return a.init=function(b,c){"undefined"==typeof c&&(c=!0),a.projectName=b,a.__debug__=c,window.onerror=function(a,b,c,d,e){logToServer("Error: "+a+"\nurl: "+b+"\nline #: "+c),e.stack&&logToServer(e.stack.replace("/at /g","<br/>at "))}},a.getXmlHttp=function(){if(!a.__debug__||a.errorNum>10)return null;try{return a.xmlHttp=new XMLHttpRequest,a.xmlHttp}catch(b){try{return a.xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"),a.xmlHttp}catch(b){try{return a.xmlHttp=new ActiveXObject("Microsoft.XMLHTTP"),a.xmlHttp}catch(b){return cc.log("您的浏览器不支持AJAX！"),null}}}},a.errorNum=0,a}(),function(a){var b=function(){function a(a){this.$_eventHandlers={},this._target=a,null==this._target&&(this._target=this)}return a.prototype.destroy=function(){this._target=null,this.$_eventHandlers=null},a.prototype.addEventListener=function(a,b,c){"undefined"==typeof c&&(c=null),this.$_eventHandlers[a]=this.$_eventHandlers[a]||[],this.$_eventHandlers[a].push([b,c])},a.prototype.removeEventListener=function(a,b){var c,d;if(this.$_eventHandlers[a]=this.$_eventHandlers[a]||[],c=this.$_eventHandlers[a])for(d=0;d<c.length;d+=1)c[d][0]==b&&c.splice(d,1)},a.prototype.hasEventListener=function(a){this.$_eventHandlers[a]=this.$_eventHandlers[a]||[];var b=this.$_eventHandlers[a];return null!=b&&b.length>0},a.prototype.removeAllListeners=function(a){this.$_eventHandlers[a]=[]},a.prototype.dispatchEvent=function(a){var b,c;if(a.target=this._target,b=this.$_eventHandlers[a.type])for(c=0;c<b.length;c+=1)a.listener=b[c][1],this.dispatchEventToHander(a,b[c][0],b[c][1])},a.prototype.dispatchEventToHander=function(a,b,c){"undefined"==typeof c&&(c=null),c=c||this,b.call(c,a)},a}();a.EventDispatcher=b}(tx||(tx={})),__extends=this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d},function(a){function c(){return null==a._enter&&(a._enter=new b(1e3*cc.Director.getInstance().getAnimationInterval(),Number.MAX_VALUE),a._enter.run=function(){a._enter.isRunning()&&a._enter.dispatchEvent(new a.Event(a.Event.ENTER_FRAME))},a._enter.start()),a._enter}var b=function(b){function c(a,c){"undefined"==typeof c&&(c=0);var d=this;b.call(this),this._isRunning=!1,this._repeatCount=0,this._count=0,this._isRunning=!0,this._repeatCount=c,this._id=setInterval(function(){d.run()},a)}return __extends(c,b),c.prototype.destroy=function(){clearInterval(this._id),b.prototype.destroy.call(this)},c.prototype.run=function(){this._isRunning&&(this.dispatchEvent(new a.Event(c.TIMER)),this._count++,this._count>=this._repeatCount&&this.$_eventHandlers&&(this.dispatchEvent(new a.Event(c.TIMER_COMPLETE)),this.destroy()))},c.prototype.start=function(){this._isRunning=!0},c.prototype.stop=function(){this._isRunning=!1},c.prototype.isRunning=function(){return this._isRunning},c.TIMER="TIMER",c.TIMER_COMPLETE="TIMER_COMPLETE",c}(a.EventDispatcher);a.Timer=b,a._enter,a.enterFrame=c}(tx||(tx={})),function(a){var b=function(){function b(a){this.type=a}return b.prototype.clone=function(){var b=new a.Event(this.type);return b.target=this.target,b.listener=this.listener,b},b.prototype.destroy=function(){this.target=null,this.listener=null},b.ENTER_FRAME="ENTER_FRAME",b.COMPLETE="COMPLETE",b.CHANGE="CHANGE",b.SELECT="SELECT",b}();a.Event=b}(tx||(tx={})),function(a){var c,b=function(){function b(a,b){this._obj=a,this._ed=b,this._isOver=!1}return b.prototype.destroy=function(){this._obj=null,this._ed=null},b.prototype.onMouseDownTouchBegan=function(b){var d=this._obj.convertToNodeSpace(b),e=new a.MouseTouchEvent(a.MouseTouchEvent.MOUSE_DOWN_TOUCH_BEGAN,d,b);this._ed.dispatchEvent(e),this._isOver||(this._isOver=!0,e=new c(c.MOUSE_TOUCH_OVER,d,b),this._ed.dispatchEvent(e))},b.prototype.onMouseTouchEndedUp=function(a,b){var e,d=this._obj.convertToNodeSpace(a);b?(e=new c(c.MOUSE_UP_TOUCH_ENDED,d,a),this._ed.dispatchEvent(e),this._isOver&&(this._isOver=!1,e=new c(c.MOUSE_TOUCH_OUT,d,a),this._ed.dispatchEvent(e))):this._isOver&&(this._isOver=!1,e=new c(c.MOUSE_TOUCH_OUT,d,a),this._ed.dispatchEvent(e),e=new c(c.MOUSE_TOUCH_CLICK,d,a),this._ed.dispatchEvent(e))},b.prototype.onMouseDraggedTouchMove=function(a,b){var e,d=this._obj.convertToNodeSpace(a);b?(e=new c(c.MOUSE_DRAGGED_TOUCH_MOVE,d,a),this._ed.dispatchEvent(e),this._isOver||(this._isOver=!0,e=new c(c.MOUSE_TOUCH_OVER,d,a),this._ed.dispatchEvent(e))):this._isOver&&(this._isOver=!1,e=new c(c.MOUSE_TOUCH_OUT,d,a),this._ed.dispatchEvent(e))},b}();a.MouseTouchEventCoprocessor=b,c=function(a){function b(b,c,d){a.call(this,b),this.pos=cc.p(c.x,c.y),this.worldPos=d}return __extends(b,a),b.prototype.destroy=function(){this.pos=null,this.worldPos=null,a.prototype.destroy.call(this)},b.MOUSE_DOWN_TOUCH_BEGAN="MOUSE_DOWN_TOUCH_BEGAN",b.MOUSE_UP_TOUCH_ENDED="MOUSE_UP_TOUCH_ENDED",b.MOUSE_DRAGGED_TOUCH_MOVE="MOUSE_DRAGGED_TOUCH_MOVE",b.MOUSE_TOUCH_OVER="MOUSE_TOUCH_OVER",b.MOUSE_TOUCH_OUT="MOUSE_TOUCH_OUT",b.MOUSE_TOUCH_CLICK="MOUSE_TOUCH_CLICK",b}(a.Event),a.MouseTouchEvent=c}(tx||(tx={})),function(a){var b=function(){function a(){}return a.prototype.destroy=function(){},a.DisplayObjectCreateNum=0,a}();a.DisplayObject=b}(tx||(tx={})),function(a){function b(b,c,d){var e=b.getParent();null!=e&&(null!=e[c]&&e[c].apply(e,d),a.bubblingRunFunction(e,c,d))}function c(b,c,d){var f,g,e=b.getChildren();for(f=0;f<e.length;f++)g=e[f],null!=g[c]&&g[c].apply(g,d),a.recursionRunFunction(g,c,d)}function d(b,c){var d,e,f,g,h,i,j,k,l,m,n,o;"undefined"==typeof c&&(c=null),d=b,e=c,f=!1,d==e&&(f=!0),b.setTouchMode(cc.TOUCH_ALL_AT_ONCE),b.setTouchEnabled(!0),g=b.onTouchesBegan,b.onTouchesBegan=function(a,b){return a.length>0&&(f||c.onTouchBegan(a[0],b),c.onMouseDownTouchBegan(a[0].getLocation())),f||c.onTouchesBegan(a,b),g(a,b),!0},b.onTouchesBegan.lastCallBack=g,h=b.onTouchesEnded,b.onTouchesEnded=function(a,b){return a.length>0&&(f||c.onTouchEnded(a[0],b),c.onMouseTouchEndedUp(a[0].getLocation())),f||c.onTouchesEnded(a,b),h(a,b),!0},b.onTouchesEnded.lastCallBack=h,i=b.onTouchesMoved,b.onTouchesMoved=function(a,b){return a.length>0&&(f||c.onTouchMoved(a[0],b),c.onMouseDraggedTouchMove(a[0].getLocation())),f||c.onTouchesMoved(a,b),i(a,b),!0},b.onTouchesMoved.lastCallBack=i,j=b.onTouchBegan,b.onTouchBegan=function(d,e){return f||c.onTouchBegan(d,e),c.onMouseDownTouchBegan(d.getLocation()),j(d,e),a.recursionRunFunction(b,"onTouchBegan",arguments),!0},b.onTouchBegan.lastCallBack=j,k=b.onTouchEnded,b.onTouchEnded=function(d,e){return f||c.onTouchEnded(d,e),c.onMouseTouchEndedUp(d.getLocation()),k(d,e),a.recursionRunFunction(b,"onTouchEnded",arguments),!0},b.onTouchEnded.lastCallBack=k,l=b.onTouchMoved,b.onTouchMoved=function(d,e){return f||c.onTouchMoved(d,e),c.onMouseDraggedTouchMove(d.getLocation()),l(d,e),a.recursionRunFunction(b,"onTouchMoved",arguments),!0},b.onTouchMoved.lastCallBack=l,m=b.onMouseDown,b.onMouseDown=function(a){return f||c.onMouseDown(a),c.onMouseDownTouchBegan(a.getLocation()),m(a),!0},b.onMouseDown.lastCallBack=m,n=b.onMouseUp,b.onMouseUp=function(a){return f||c.onMouseUp(a),c.onMouseTouchEndedUp(a.getLocation()),n(a),!0},b.onMouseUp.lastCallBack=n,o=b.onMouseDragged,b.onMouseDragged=function(a){return f||c.onMouseDragged(a),c.onMouseDraggedTouchMove(a.getLocation()),o(a),!0},b.onMouseDragged.lastCallBack=o}function e(a){a instanceof cc.Layer&&(a.onTouchesEnded=a.onTouchesEnded.lastCallBack,a.onTouchesBegan=a.onTouchesBegan.lastCallBack,a.onTouchesMoved=a.onTouchesMoved.lastCallBack,a.onTouchBegan=a.onTouchBegan.lastCallBack,a.onTouchEnded=a.onTouchEnded.lastCallBack,a.onTouchMoved=a.onTouchMoved.lastCallBack,a.onMouseDown=a.onMouseDown.lastCallBack,a.onMouseUp=a.onMouseUp.lastCallBack,a.onMouseDragged=a.onMouseDragged.lastCallBack)}a.bubblingRunFunction=b,a.recursionRunFunction=c,a.interactiveObjectCreate=d,a.interactiveObjectRemove=e}(tx||(tx={})),function(a){var b=function(b){function c(){b.call(this),this._name=typeof this+a.DisplayObject.DisplayObjectCreateNum++,this._mouseEnable=!1,this._ed=new a.EventDispatcher(this),this._touchLayer=cc.Layer.create(),this.addChild(this._touchLayer),this._mouseTouchEventCoprocessor=new a.MouseTouchEventCoprocessor(this,this._ed)}return __extends(c,b),c.prototype.destroy=function(){this.removeChild(this._touchLayer),this._touchLayer=null,this._ed.destroy(),this._ed=null},c.prototype.setMouseTouchEnabled=function(b){this._mouseEnable!=b&&(this._mouseEnable=b,b?a.interactiveObjectCreate(this._touchLayer,this):a.interactiveObjectRemove(this._touchLayer))},c.prototype.getMouseTouchEnabled=function(){return this._mouseEnable},c.prototype.getTouchLayer=function(){return this._touchLayer},c.prototype.getWidth=function(){return this.getBoundingBox().width},c.prototype.getHeight=function(){return this.getBoundingBox().height},c.prototype.setWidth=function(a){this.setScaleX(a/this.getContentSize().width)},c.prototype.setHeight=function(a){this.setScaleY(a/this.getContentSize().height)},c.prototype.getMc=function(){return this},c.prototype.setName=function(){this._name=name},c.prototype.getName=function(){return this._name},c.prototype.addEventListener=function(a,b,c){"undefined"==typeof c&&(c=null),this._ed.addEventListener(a,b,c)},c.prototype.removeEventListener=function(a,b){this._ed.removeEventListener(a,b)},c.prototype.removeAllListeners=function(a){this._ed.removeAllListeners(a)},c.prototype.hasEventListener=function(a){return this._ed.hasEventListener(a)},c.prototype.dispatchEvent=function(a){this._ed.dispatchEvent(a)},c.prototype.dispatchEventToHander=function(a,b){this._ed.dispatchEventToHander(a,b)},c.prototype.onMouseDown=function(){},c.prototype.onMouseDragged=function(){},c.prototype.onMouseUp=function(){},c.prototype.onTouchBegan=function(){},c.prototype.onTouchMoved=function(){},c.prototype.onTouchEnded=function(){},c.prototype.onTouchesBegan=function(){},c.prototype.onTouchesMoved=function(){},c.prototype.onTouchesEnded=function(){},c.prototype.onMouseDownTouchBegan=function(a){this._mouseTouchEventCoprocessor.onMouseDownTouchBegan(a)},c.prototype.onMouseTouchEndedUp=function(a){this._mouseTouchEventCoprocessor.onMouseTouchEndedUp(a,!0)},c.prototype.onMouseDraggedTouchMove=function(a){this._mouseTouchEventCoprocessor.onMouseDraggedTouchMove(a,!0)},c}(cc.NodeRGBA);a.InteractiveNodeRGBA=b}(tx||(tx={})),function(a){var b=function(b){function c(){b.call(this),this._name=typeof this+a.DisplayObject.DisplayObjectCreateNum++,this._mouseEnable=!1,this._ed=new a.EventDispatcher(this),this.setMouseTouchEnabled(!0),this._mouseTouchEventCoprocessor=new a.MouseTouchEventCoprocessor(this,this._ed)}return __extends(c,b),c.prototype.destroy=function(){this._ed.destroy(),this._ed=null},c.prototype.setMouseTouchEnabled=function(b){this._mouseEnable!=b&&(this._mouseEnable=b,b?a.interactiveObjectCreate(this,this):a.interactiveObjectRemove(this))},c.prototype.getWidth=function(){return this.getBoundingBox().width},c.prototype.getHeight=function(){return this.getBoundingBox().height},c.prototype.setWidth=function(a){this.setScaleX(a/this.getContentSize().width)},c.prototype.setHeight=function(a){this.setScaleY(a/this.getContentSize().height)},c.prototype.getMouseTouchEnabled=function(){return this._mouseEnable},c.prototype.getMc=function(){return this},c.prototype.setName=function(){this._name=name},c.prototype.getName=function(){return this._name},c.prototype.addEventListener=function(a,b,c){"undefined"==typeof c&&(c=null),this._ed.addEventListener(a,b,c)},c.prototype.removeEventListener=function(a,b){this._ed.removeEventListener(a,b)},c.prototype.removeAllListeners=function(a){this._ed.removeAllListeners(a)},c.prototype.hasEventListener=function(a){return this._ed.hasEventListener(a)},c.prototype.dispatchEvent=function(a){this._ed.dispatchEvent(a)},c.prototype.dispatchEventToHander=function(a,b){this._ed.dispatchEventToHander(a,b)},c.prototype.onMouseDownTouchBegan=function(a){this._mouseTouchEventCoprocessor.onMouseDownTouchBegan(a)},c.prototype.onMouseTouchEndedUp=function(a){this._mouseTouchEventCoprocessor.onMouseTouchEndedUp(a,!0)},c.prototype.onMouseDraggedTouchMove=function(a){this._mouseTouchEventCoprocessor.onMouseDraggedTouchMove(a,!0)},c}(cc.Layer);a.InteractiveLayer=b}(tx||(tx={})),function(a){var b=function(b){function c(){b.call(this),this._name=typeof this+a.DisplayObject.DisplayObjectCreateNum++,this._mouseEnable=!1,this._ed=new a.EventDispatcher(this),this._touchLayer=cc.Layer.create(),this.addChild(this._touchLayer),this._mouseTouchEventCoprocessor=new a.MouseTouchEventCoprocessor(this,this._ed)}return __extends(c,b),c.createWithSpriteFrame=function(a){var b=new c;return b&&b.initWithSpriteFrame(a)?b:null},c.createWithTexture=function(a){var b=new c;return b&&b.initWithTexture(a)?b:null},c.prototype.destroy=function(){this.removeChild(this._touchLayer),this._touchLayer=null,this._ed.destroy(),this._ed=null},c.prototype.setMouseTouchEnabled=function(b){this._mouseEnable!=b&&(this._mouseEnable=b,b?a.interactiveObjectCreate(this._touchLayer,this):a.interactiveObjectRemove(this._touchLayer))},c.prototype.getMouseTouchEnabled=function(){return this._mouseEnable},c.prototype.getTouchLayer=function(){return this._touchLayer},c.prototype.getWidth=function(){return this.getBoundingBox().width},c.prototype.getHeight=function(){return this.getBoundingBox().height},c.prototype.setWidth=function(a){this.setScaleX(a/this.getContentSize().width)},c.prototype.setHeight=function(a){this.setScaleY(a/this.getContentSize().height)},c.prototype.getMc=function(){return this},c.prototype.setName=function(a){this._name=a},c.prototype.getName=function(){return this._name},c.prototype.addEventListener=function(a,b,c){"undefined"==typeof c&&(c=null),this._ed.addEventListener(a,b,c)},c.prototype.removeEventListener=function(a,b){this._ed.removeEventListener(a,b)},c.prototype.removeAllListeners=function(a){this._ed.removeAllListeners(a)},c.prototype.hasEventListener=function(a){return this._ed.hasEventListener(a)},c.prototype.dispatchEvent=function(a){this._ed.dispatchEvent(a)},c.prototype.dispatchEventToHander=function(a,b){this._ed.dispatchEventToHander(a,b)},c.prototype.onMouseDown=function(){},c.prototype.onMouseDragged=function(){},c.prototype.onMouseUp=function(){},c.prototype.onTouchBegan=function(){},c.prototype.onTouchMoved=function(){},c.prototype.onTouchEnded=function(){},c.prototype.onTouchesBegan=function(){},c.prototype.onTouchesMoved=function(){},c.prototype.onTouchesEnded=function(){},c.prototype.isInRect=function(a,b,c){return a>=0&&b>=0&&a<=c.width&&b<=c.height?!0:!1},c.prototype.onMouseDownTouchBegan=function(a){var b=this.convertToNodeSpace(a),c=this.getBoundingBox(),d=this._unflippedOffsetPositionFromCenter;this.isInRect(b.x-d.x,b.y-d.y,c)&&this._mouseTouchEventCoprocessor.onMouseDownTouchBegan(a)},c.prototype.onMouseTouchEndedUp=function(a){var b=this.convertToNodeSpace(a),c=this.getBoundingBox(),d=this._unflippedOffsetPositionFromCenter;this._mouseTouchEventCoprocessor.onMouseTouchEndedUp(a,this.isInRect(b.x-d.x,b.y-d.y,c))},c.prototype.onMouseDraggedTouchMove=function(a){var b=this.convertToNodeSpace(a),c=this.getBoundingBox(),d=this._unflippedOffsetPositionFromCenter;this._mouseTouchEventCoprocessor.onMouseDraggedTouchMove(a,this.isInRect(b.x-d.x,b.y-d.y,c))},c}(cc.Sprite);a.InteractiveSprite=b}(tx||(tx={})),function(a){var b=function(b){function c(c){"undefined"==typeof c&&(c=null),b.call(this,c),this._name=typeof this+a.DisplayObject.DisplayObjectCreateNum++,this._mouseTouchEventCoprocessor=new a.MouseTouchEventCoprocessor(this._mc,this)}return __extends(c,b),c.prototype.initWithLayer=function(b){this._mc=b,a.interactiveObjectCreate(b,this)},c.prototype.destroy=function(){a.interactiveObjectRemove(this._mc),this._mc=null,b.prototype.destroy.call(this)},c.prototype.getMc=function(){return this._mc},c.prototype.setName=function(){this._name=name},c.prototype.getName=function(){return this._name},c.prototype.onMouseDown=function(){},c.prototype.onMouseDragged=function(){},c.prototype.onMouseUp=function(){},c.prototype.onTouchBegan=function(){},c.prototype.onTouchMoved=function(){},c.prototype.onTouchEnded=function(){},c.prototype.onTouchesBegan=function(){},c.prototype.onTouchesMoved=function(){},c.prototype.onTouchesEnded=function(){},c.prototype.onMouseDownTouchBegan=function(a){this._mouseTouchEventCoprocessor.onMouseDownTouchBegan(a)},c.prototype.onMouseTouchEndedUp=function(a){this._mouseTouchEventCoprocessor.onMouseTouchEndedUp(a,!0)},c.prototype.onMouseDraggedTouchMove=function(a){this._mouseTouchEventCoprocessor.onMouseDraggedTouchMove(a,!0)},c}(a.EventDispatcher);a.InteractiveObject=b}(tx||(tx={})),function(a){var b=function(){function b(b){this.sNames=[],a.Attach.addSpriteFrames(b),this.parseAtlasXml(b)}return b.FindPlistInDict=function(c){var d,e,f,g,h,i,j;if(null!=b.CacheHelpFindPlistInDict[c])return b.CacheHelpFindPlistInDict[c];d=cc.SAXParser.getInstance()._xmlDict;for(e in d)if(f=cc.SAXParser.getInstance()._parserXML(d[e],e),g=f.documentElement,"plist"==g.tagName){h=cc.FileUtils.getInstance().dictionaryWithContentsOfFileThreadSafe(e),i=h.frames;for(j in i)if(0==j.indexOf(c))return b.CacheHelpFindPlistInDict[c]=a.Utils.removeFullPathForFilename(e),b.CacheHelpFindPlistInDict[c]}return null},b.prototype.destroy=function(){this.sNames=null,this.mTextureRegions=null},b.prototype.parseAtlasXml=function(a){a=cc.FileUtils.getInstance().fullPathForFilename(a);var b=cc.FileUtils.getInstance().dictionaryWithContentsOfFileThreadSafe(a);null!=b?this.mTextureRegions=b.frames:cc.log("no dict")},b.prototype.getTexture=function(a){return cc.SpriteFrameCache.getInstance().getSpriteFrame(a)},b.prototype.getTextures=function(a,b){"undefined"==typeof a&&(a=""),"undefined"==typeof b&&(b=null),null==b&&(b=[]),this.sNames=this.getNames(a,this.sNames);for(var c in this.sNames)b.push(this.getTexture(this.sNames[c]));return this.sNames=[],b},b.prototype.getNames=function(a,b){"undefined"==typeof a&&(a=""),"undefined"==typeof b&&(b=null),null==b&&(b=[]);for(var c in this.mTextureRegions)0==c.indexOf(a)&&b.push(c);return b.sort(),b},b.CacheHelpFindPlistInDict={},b}();a.TextureAtlas=b}(tx||(tx={})),function(a){var b=function(b){function c(c,d,e,f){b.call(this,c),this._mc=c,this._iObject=d,this._fixedPos=f,this._touchLayer=e,this._startDragStartPos=cc.p(c.getPosition().x,c.getPosition().y),null!=d?(d.addEventListener.call(d,a.MouseTouchEvent.MOUSE_DOWN_TOUCH_BEGAN,this.onEventMouseTouchBegin,this),d.addEventListener.call(d,a.MouseTouchEvent.MOUSE_UP_TOUCH_ENDED,this.onEventMouseTouchEnded,this),d.addEventListener.call(d,a.MouseTouchEvent.MOUSE_DRAGGED_TOUCH_MOVE,this.onEventMouseTouchMove,this)):null!=this._touchLayer&&a.interactiveObjectCreate(this._touchLayer,this)}return __extends(c,b),c.StartDragByInteractiveObject=function(a){c.EndDragByInteractiveObject(a);var b=new c(a.getMc(),a,null,!0);c._dragHander.push(b)},c.EndDragByInteractiveObject=function(a){for(var b=0;b<c._dragHander.length;b++)if(c._dragHander[b].getMc()==a.getMc())return c._dragHander[b].destroy(),c._dragHander.splice(b,1),void 0},c.StartDrag=function(b,d){if("undefined"==typeof d&&(d=null),c.EndDrag(b),b instanceof a.InteractiveNodeRGBA)d=b.getTouchLayer();else if(b instanceof cc.Layer)d=b;else if(!(d instanceof cc.Layer))return;var e=new c(b,null,d,!0);c._dragHander.push(e)},c.EndDrag=function(a){for(var b=0;b<c._dragHander.length;b++)if(c._dragHander[b].getMc()==a)return c._dragHander[b].destroy(),c._dragHander.splice(b,1),void 0},c.SetInteractiveObjectToDragObject=function(a){c.RemoveInteractiveObjectDragObject(a);var b=new c(a.getMc(),a);c._setDragHander.push(b)},c.RemoveInteractiveObjectDragObject=function(a){for(var b=0;b<c._setDragHander.length;b++)if(c._setDragHander[b].getMc()==a.getMc())return c._setDragHander[b].destroy(),c._setDragHander.splice(b,1),void 0},c.SetToDragObject=function(a,b){if("undefined"==typeof b&&(b=null),c.RemoveDragObject(a),null!=a.getTouchLayer)b=a.getTouchLayer();else if(a instanceof cc.Layer)b=a;else if(!(b instanceof cc.Layer))return;var d=new c(a,null,b);c._setDragHander.push(d)},c.RemoveDragObject=function(a){for(var b=0;b<c._setDragHander.length;b++)if(c._setDragHander[b].getMc()==a)return c._setDragHander[b].destroy(),c._setDragHander.splice(b,1),void 0},c.prototype.destroy=function(){null!=this._touchLayer&&a.interactiveObjectRemove(this._touchLayer),null!=this._iObject&&(this._iObject.removeEventListener.call(this._iObject,a.MouseTouchEvent.MOUSE_DOWN_TOUCH_BEGAN,this.onEventMouseTouchBegin),this._iObject.removeEventListener.call(this._iObject,a.MouseTouchEvent.MOUSE_UP_TOUCH_ENDED,this.onEventMouseTouchEnded),this._iObject.removeEventListener.call(this._iObject,a.MouseTouchEvent.MOUSE_DRAGGED_TOUCH_MOVE,this.onEventMouseTouchMove)),this._mc=null},c.prototype.onEventMouseTouchBegin=function(a){a.listener.onMouseDownTouchBegan(a.worldPos)},c.prototype.onEventMouseTouchEnded=function(a){a.listener.onMouseTouchEndedUp(a.worldPos)},c.prototype.onEventMouseTouchMove=function(a){a.listener.onMouseDraggedTouchMove(a.worldPos)},c.prototype.onMouseDownTouchBegan=function(a){this._fixedPos||(this._startDragStartMousePos=new cc.Point(a.x,a.y),this._startDragStartPos=cc.p(this._mc.getPosition().x,this._mc.getPosition().y))},c.prototype.onMouseTouchEndedUp=function(){this._fixedPos||(this._startDragStartMousePos=null)},c.prototype.onMouseDraggedTouchMove=function(a){null==this._startDragStartMousePos&&(this._startDragStartMousePos=new cc.Point(a.x,a.y));var b=new cc.Point(a.x,a.y);b.x-=this._startDragStartMousePos.x,b.y-=this._startDragStartMousePos.y,this._mc.setPositionX(this._startDragStartPos.x+b.x),this._mc.setPositionY(this._startDragStartPos.y+b.y)},c._dragHander=[],c._setDragHander=[],c}(a.InteractiveObject);a.DragObject=b}(tx||(tx={})),function(a){var b=function(b){function c(c){b.call(this),this._name=typeof this+a.DisplayObject.DisplayObjectCreateNum++,this._isTransparent=!0,this.setBitmapData(c),this._mouseTouchEventCoprocessor=new a.MouseTouchEventCoprocessor(this,this._ed)}return __extends(c,b),c.prototype.destroy=function(a){"undefined"==typeof a&&(a=!1),null!=this._bmd&&this._bmd.destroy(),this._bmd=null,b.prototype.destroy.call(this)},c.prototype.setBitmapData=function(a){this._bmd=a},c.prototype.getBitmapData=function(){return this._bmd},c.prototype.getWidth=function(){return this._bmd.getWidth()*this.getScaleX()},c.prototype.getHeight=function(){return this._bmd.getHeight()*this.getScaleY()},c.prototype.draw=function(a){if(null!=this._bmd){a.globalAlpha=this.getDisplayedOpacity()/255;var b=new cc.Size(cc.EGLView.getInstance().getScaleX()*this._bmd.getWidth(),cc.EGLView.getInstance().getScaleY()*this._bmd.getHeight());cc.drawingUtil.drawImage(this._bmd._getImageEle(),cc.p(0,0),new cc.Size(this._bmd.getWidth(),this._bmd.getHeight()),cc.p(0,0),b)}},c.prototype.setTransparent=function(a){"undefined"==typeof a&&(a=!0),this._isTransparent=a},c.prototype.getTransparent=function(){return this._isTransparent},c.prototype.onMouseDownTouchBegan=function(a){var b=this.convertToNodeSpace(a),c=this._bmd.getPixel4B(b.x,this._bmd.getHeight()-b.y);c&&(!this._isTransparent||c.a>0)&&this._mouseTouchEventCoprocessor.onMouseDownTouchBegan(a)},c.prototype.onMouseTouchEndedUp=function(a){var b=this.convertToNodeSpace(a),c=this._bmd.getPixel4B(b.x,this._bmd.getHeight()-b.y);this._mouseTouchEventCoprocessor.onMouseTouchEndedUp(a,c&&(!this._isTransparent||c.a>0))},c.prototype.onMouseDraggedTouchMove=function(a){var b=this.convertToNodeSpace(a),c=this._bmd.getPixel4B(b.x,this._bmd.getHeight()-b.y);this._mouseTouchEventCoprocessor.onMouseDraggedTouchMove(a,c&&(!this._isTransparent||c.a>0))},c}(a.InteractiveNodeRGBA);a.Bitmap=b}(tx||(tx={})),function(a){var b=function(){function b(b,c,d,e){var f,g;"undefined"==typeof d&&(d=!0),"undefined"==typeof e&&(e=4294967295),this._lock=!1,this._width=b,this._height=c,this._transparent=d,this._fillColor=e,this._temp_Canvas=document.createElement("canvas"),this._temp_ctx=this._temp_Canvas.getContext("2d"),this._temp_Canvas.width=this._width,this._temp_Canvas.height=this._height,f=this._fillColor%16777216,g=this._transparent?(this._fillColor>>24)%256:255,this._temp_ctx.fillStyle=a.Utils.UINT_TO_3STRING(f),this._temp_ctx.globalAlpha=g/255,this._temp_ctx.fillRect(0,0,this._width,this._height),this._temp_ctx.globalAlpha=1,this._ImgData=this._temp_ctx.createImageData(this._width,this._height)}return b.prototype.destroy=function(){this._temp_ctx=null,this._temp_Canvas=null,this._ImgData=null},b.prototype.clone=function(){var c,a=new b(this._width,this._height,this._transparent,this._fillColor);for(a._ImgData=this._temp_ctx.createImageData(this._width,this._height),c=0;c<this._ImgData.data.length;c+=4)a._ImgData.data[c]=this._ImgData.data[c];return a.updateImageEle(),a},b.prototype.draw=function(c,d,e,f,g,h){var i,j,k,m,n,o;"undefined"==typeof d&&(d=null),"undefined"==typeof e&&(e=null),"undefined"==typeof f&&(f=null),"undefined"==typeof g&&(g=null),"undefined"==typeof h&&(h=!1),i=this,cc.renderContext.clearRect(0,0,cc.canvas.width,-cc.canvas.height),j=c.getParent(),j&&j.removeChild(c),null==g&&(g=new cc.Rect(0,0,this._width,this._height)),b.GlobalResolutionEnblen&&cc.EGLView.getInstance()._resolutionPolicy!=cc.RESOLUTION_POLICY.UNKNOWN&&(k=cc.EGLView.getInstance().getDesignResolutionSize(),cc.EGLView.getInstance()._frameSize=k,cc.EGLView.getInstance()._rpShowAll.apply(cc.EGLView.getInstance(),k),cc.EGLView.getInstance()._setScaleXYForRenderTexture()),m=cc.Scene.create(),m.addChild(c),null==d&&(d=new a.Matrix(1,0,0,1,0,0)),n=c.nodeToParentTransform(),c._transform=d,m.draw=function(b){var c=i._fillColor%16777216,d=i._transparent?(i._fillColor>>24)%256:255;b.fillStyle=a.Utils.UINT_TO_3STRING(c),b.globalAlpha=d/255,b.fillRect(0,0,i._width,-i._height),b.globalAlpha=1},o=new cc.Node,m.addChild(o),o.draw=function(a){i._ImgData=a.getImageData(g.x,cc.canvas.height-i._height+g.y,g.width,g.height),i.updateImageEle(),c._transform=n,m.removeChild(c),j&&j.addChild(c),b.GlobalResolutionEnblen&&cc.EGLView.getInstance()._resolutionPolicy!=cc.RESOLUTION_POLICY.UNKNOWN&&cc.EGLView.getInstance().setDesignResolutionSize(k.width,k.height,cc.EGLView.getInstance()._resolutionPolicy)},m.visit(),cc.Director.getInstance().getRunningScene().visit()},b.prototype.isInRect=function(a,b){return a>=0&&b>=0&&a<=this._width&&b<=this._height?!0:!1},b.prototype.setPixel=function(b,c,d){if(this.isInRect(b,c)){b=Math.floor(b),c=Math.floor(c);var e=a.Utils.COLOR_3B(d);this._ImgData.data[4*(c*this._width+b)]=e.r,this._ImgData.data[4*(c*this._width+b)+1]=e.g,this._ImgData.data[4*(c*this._width+b)+2]=e.b,this._ImgData.data[4*(c*this._width+b)+3]=1,this.updateImageEle()
}},b.prototype.setPixel32=function(b,c,d){if(this.isInRect(b,c)){b=Math.floor(b),c=Math.floor(c);var e=a.Utils.COLOR_4B(d);this._ImgData.data[4*(c*this._width+b)]=e.r,this._ImgData.data[4*(c*this._width+b)+1]=e.g,this._ImgData.data[4*(c*this._width+b)+2]=e.b,this._ImgData.data[4*(c*this._width+b)+3]=e.a,this.updateImageEle()}},b.prototype.getPixel=function(b,c){var d=this.getPixel3B(b,c);return d?a.Utils.C3B_TO_UINT(d):0/0},b.prototype.getPixel3B=function(a,b){var c,d,e;return this.isInRect(a,b)?(a=Math.floor(a),b=Math.floor(b),c=this._ImgData.data[4*(b*this._width+a)],d=this._ImgData.data[4*(b*this._width+a)+1],e=this._ImgData.data[4*(b*this._width+a)+2],new cc.Color3B(c,d,e)):null},b.prototype.getPixel32=function(b,c){var d=this.getPixel4B(b,c);return d?a.Utils.C4B_TO_UINT(d):0/0},b.prototype.getPixel4B=function(a,b){var c,d,e,f;return this.isInRect(a,b)?(a=Math.floor(a),b=Math.floor(b),c=this._ImgData.data[4*(b*this._width+a)],d=this._ImgData.data[4*(b*this._width+a)+1],e=this._ImgData.data[4*(b*this._width+a)+2],f=this._ImgData.data[4*(b*this._width+a)+3],new cc.Color4B(c,d,e,f)):null},b.prototype.lock=function(){this._lock=!0},b.prototype.unlock=function(){1==this._lock&&(this._lock=!1,this.updateImageEle())},b.prototype._getImgData=function(){return this._ImgData},b.prototype._getImageEle=function(){return this._temp_Canvas},b.prototype.getData=function(){return this._ImgData.data},b.prototype.setData=function(a){this._ImgData.data=a,this.updateImageEle()},b.prototype.updateImageEle=function(){this._lock||(this._temp_ctx.clearRect(0,0,this._width,this._height),this._temp_ctx.putImageData(this._ImgData,0,0))},b.prototype.getWidth=function(){return this._width},b.prototype.getHeight=function(){return this._height},b.GlobalResolutionEnblen=!0,b}();a.BitmapData=b}(tx||(tx={})),function(a){var b=function(b){function c(a,c){"undefined"==typeof c&&(c=12);var d=this;b.call(this),a.length>0?(this.mTexture=a[0],this.mFrameScript=[],b.prototype.initWithSpriteFrame.call(this,a[0]),this._init(a,c),this.schedule(function(){d.advanceTime(cc.Director.getInstance().getAnimationInterval())},cc.Director.getInstance().getAnimationInterval())):trace("empty texture array")}return __extends(c,b),c.prototype.destroy=function(){this.mTexture=null,this.mTextures=null,this.mFrameScript=null,this.mDurations=null,this.mStartTimes=null,b.prototype.destroy.call(this)},c.prototype._init=function(a,b){var c,d;for(0>=b&&trace("Invalid fps: "+b),c=a.length,this.mDefaultFrameDuration=1/b,this.mLoop=!0,this.mPlaying=!0,this.mCurrentTime=0,this.mCurrentFrame=0,this.mTextures=a.concat(),this.mDurations=new Array(c),this.mStartTimes=new Array(c),d=0;c>d;++d)this.mDurations[d]=this.mDefaultFrameDuration,this.mStartTimes[d]=d*this.mDefaultFrameDuration},c.prototype.addFrame=function(a,b,c){"undefined"==typeof b&&(b=null),"undefined"==typeof c&&(c=-1),this.addFrameAt(this.getNumFrames(),a,b,c)},c.prototype.addFrameAt=function(a,b,c,d){"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=-1),(0>a||a>this.getNumFrames())&&trace("Invalid frame id"),0>d&&(d=this.mDefaultFrameDuration),this.mTextures.splice(a,0,b),this.mDurations.splice(a,0,d),a>0&&a==this.getNumFrames()?this.mStartTimes[a]=this.mStartTimes[Math.floor(a-1)]+this.mDurations[Math.floor(a-1)]:this.updateStartTimes()},c.prototype.removeFrameAt=function(a){(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),1==this.getNumFrames()&&trace("Movie clip must not be empty"),this.mTextures.splice(a,1),this.mDurations.splice(a,1),this.updateStartTimes()},c.prototype.getFrameTexture=function(a){return(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),this.mTextures[a]},c.prototype.setFrameTexture=function(a,b){(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),this.mTextures[a]=b},c.prototype.getFrameDuration=function(a){return(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),this.mDurations[a]},c.prototype.setFrameDuration=function(a,b){(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),this.mDurations[a]=b,this.updateStartTimes()},c.prototype.play=function(){this.mPlaying=!0},c.prototype.pause=function(){this.mPlaying=!1},c.prototype.stop=function(){this.mPlaying=!1,this.setCurrentFrame(1)},c.prototype.gotoAndPlay=function(a){this.mPlaying=!0,this.setCurrentFrame(a)},c.prototype.gotoAndStop=function(a){this.mPlaying=!1,this.setCurrentFrame(a)},c.prototype.addFrameScript=function(a,b,c){"undefined"==typeof c&&(c=null),null!=b&&(this.mFrameScript[a]=[b,c])},c.prototype.updateStartTimes=function(){var b,a=this.getNumFrames();for(this.mStartTimes.length=0,this.mStartTimes[0]=0,b=1;a>b;++b)this.mStartTimes[b]=this.mStartTimes[Math.floor(b-1)]+this.mDurations[Math.floor(b-1)]},c.prototype.advanceTime=function(b){var c,d,e,f,g,h,i;if(this.mPlaying&&!(0>=b)){if(d=this.mCurrentFrame,e=0,f=!1,g=this._ed.hasEventListener(a.Event.COMPLETE),h=!1,i=this.getTotalTime(),this.mLoop&&this.mCurrentTime==i&&(this.mCurrentTime=0,this.mCurrentFrame=0),this.mCurrentTime<i)for(this.mCurrentTime+=b,c=this.mTextures.length-1;this.mCurrentTime>this.mStartTimes[this.mCurrentFrame]+this.mDurations[this.mCurrentFrame]&&(this.mCurrentFrame==c?this.mLoop&&!g?(this.mCurrentTime-=i,this.mCurrentFrame=0):(f=!0,e=this.mCurrentTime-i,h=g,this.mCurrentFrame=c,this.mCurrentTime=i):(this.mCurrentFrame++,this.mCurrentFrame==c&&this.mCurrentTime==i&&(h=g)),this.mCurrentFrame!=d&&this.runFrameScript(),!f););this.mCurrentFrame!=d&&this._setTexture(this.mTextures[this.mCurrentFrame]),h&&this.dispatchEvent(new a.Event(a.Event.COMPLETE)),this.mLoop&&0!=e&&this.advanceTime(e)}},c.prototype.isComplete=function(){return!this.mLoop&&this.mCurrentTime>=this.getTotalTime()},c.prototype.getTotalTime=function(){var a=this.mTextures.length;return this.mStartTimes[Math.floor(a-1)]+this.mDurations[Math.floor(a-1)]},c.prototype.getCurrentTime=function(){return this.mCurrentTime},c.prototype.getNumFrames=function(){return this.mTextures.length},c.prototype.getLoop=function(){return this.mLoop},c.prototype.setLoop=function(a){this.mLoop=a},c.prototype.getCurrentFrame=function(){return this.mCurrentFrame+1},c.prototype.setCurrentFrame=function(a){a--,0>a&&(a=0),a>=this.getNumFrames()&&(a=this.getNumFrames()-1),this.mCurrentTime=0;for(var b=0;a>b;++b)this.mCurrentTime+=this.getFrameDuration(b);this.mCurrentFrame!=a&&(this.mCurrentFrame=a,this.runFrameScript(),this._setTexture(this.mTextures[this.mCurrentFrame]))},c.prototype.getFps=function(){return 1/this.mDefaultFrameDuration},c.prototype.setFps=function(a){var b,c,d,e;for(0>=a&&trace("Invalid fps: "+a),b=1/a,c=b/this.mDefaultFrameDuration,this.mCurrentTime*=c,this.mDefaultFrameDuration=b,d=0;d<this.getNumFrames();++d)e=this.mDurations[d]*c,this.mDurations[d]=e;this.updateStartTimes()},c.prototype.isPlaying=function(){return this.mPlaying?this.mLoop||this.mCurrentTime<this.getTotalTime():!1},c.prototype.runFrameScript=function(){var a=this.mFrameScript[this.mCurrentFrame];null!=a&&(a[1]=a[1]||this,a[0].call(a[1]))},c.prototype.getCurrSpriteFrame=function(){return this.mTexture},c.prototype._getTexture=function(){return this.mTexture},c.prototype._setTexture=function(a){null==a?trace("Texture cannot be null"):a!=this.mTexture&&(this.mTexture=a,b.prototype.setDisplayFrame.call(this,this.mTexture))},c}(a.InteractiveSprite);a.MovieClip=b}(tx||(tx={})),function(a){var b=function(b){function c(c){b.call(this),this.widget=c,this._mouseTouchEventCoprocessor=new a.MouseTouchEventCoprocessor(this.widget,this),this.initEvent()}return __extends(c,b),c.prototype.destroy=function(){this.widget.addTouchEventListener(function(){},this),this._mouseTouchEventCoprocessor.destroy(),this._mouseTouchEventCoprocessor=null,this.widget=null,b.prototype.destroy.call(this)},c.prototype.initEvent=function(a){"undefined"==typeof a&&(a=null),this.widget.addTouchEventListener(this.onTouchEvent,this)},c.prototype.onTouchEvent=function(a,b){var c,d;switch(b){case ccs.TouchEventType.began:c=this.widget.getTouchStartPos(),d=this.widget.convertToWorldSpace(c),this._mouseTouchEventCoprocessor.onMouseDownTouchBegan(d);break;case ccs.TouchEventType.ended:c=this.widget.getTouchEndPos(),d=this.widget.convertToWorldSpace(c),this._mouseTouchEventCoprocessor.onMouseTouchEndedUp(d,this.widget.hitTest(c));break;case ccs.TouchEventType.moved:c=this.widget.getTouchEndPos(),d=this.widget.convertToWorldSpace(c),this._mouseTouchEventCoprocessor.onMouseDraggedTouchMove(d,this.widget.hitTest(c))}},c}(a.EventDispatcher);a.WidgetEx=b}(tx||(tx={})),function(a){var b=function(b){function c(c,d){var e,f,g,h,i,j,k,l;if("undefined"==typeof d&&(d=12),e=this,b.call(this,c),0>=d&&trace("Invalid fps: "+d),this.iv=this.widget,f=this.iv._textureFile,this.iv._imageTexType!=ccs.TextureResType.plist)throw new Error("this._imageTexType != plist");if(i=f.lastIndexOf("."),-1!=i&&(f=f.substr(0,i+1)),f=f.substr(0,f.length-4),g=a.TextureAtlas.FindPlistInDict(f),null==g)throw new Error("plistName is null, name = "+f);for(j=new a.TextureAtlas(g),h=j.getNames(f),this.mTexture=h[0],this.mFrameScript=[],this.iv.schedule(function(){e.advanceTime(cc.Director.getInstance().getAnimationInterval())},cc.Director.getInstance().getAnimationInterval()),k=h.length,this.mDefaultFrameDuration=1/d,this.mLoop=!0,this.mPlaying=!0,this.mCurrentTime=0,this.mCurrentFrame=0,this.mTextures=h.concat(),this.mDurations=new Array(k),this.mStartTimes=new Array(k),l=0;k>l;++l)this.mDurations[l]=this.mDefaultFrameDuration,this.mStartTimes[l]=l*this.mDefaultFrameDuration}return __extends(c,b),c.prototype.destroy=function(){this.mTexture=null,this.mTexture=null,this.mTextures=null,this.mFrameScript=null,b.prototype.destroy.call(this)},c.prototype.addFrame=function(a,b,c){"undefined"==typeof b&&(b=null),"undefined"==typeof c&&(c=-1),this.addFrameAt(this.getNumFrames(),a,b,c)},c.prototype.addFrameAt=function(a,b,c,d){"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=-1),(0>a||a>this.getNumFrames())&&trace("Invalid frame id"),0>d&&(d=this.mDefaultFrameDuration),this.mTextures.splice(a,0,b),this.mDurations.splice(a,0,d),a>0&&a==this.getNumFrames()?this.mStartTimes[a]=this.mStartTimes[Math.floor(a-1)]+this.mDurations[Math.floor(a-1)]:this.updateStartTimes()},c.prototype.removeFrameAt=function(a){(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),1==this.getNumFrames()&&trace("Movie clip must not be empty"),this.mTextures.splice(a,1),this.mDurations.splice(a,1),this.updateStartTimes()},c.prototype.getFrameTexture=function(a){return(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),this.mTextures[a]},c.prototype.setFrameTexture=function(a,b){(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),this.mTextures[a]=b},c.prototype.getFrameDuration=function(a){return(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),this.mDurations[a]},c.prototype.setFrameDuration=function(a,b){(0>a||a>=this.getNumFrames())&&trace("Invalid frame id"),this.mDurations[a]=b,this.updateStartTimes()},c.prototype.play=function(){this.mPlaying=!0},c.prototype.pause=function(){this.mPlaying=!1},c.prototype.stop=function(){this.mPlaying=!1,this.setCurrentFrame(1)},c.prototype.gotoAndPlay=function(a){this.mPlaying=!0,this.setCurrentFrame(a)},c.prototype.gotoAndStop=function(a){this.mPlaying=!1,this.setCurrentFrame(a)},c.prototype.addFrameScript=function(a,b,c){"undefined"==typeof c&&(c=null),null!=b&&(this.mFrameScript[a]=[b,c])},c.prototype.updateStartTimes=function(){var b,a=this.getNumFrames();for(this.mStartTimes.length=0,this.mStartTimes[0]=0,b=1;a>b;++b)this.mStartTimes[b]=this.mStartTimes[Math.floor(b-1)]+this.mDurations[Math.floor(b-1)]},c.prototype.advanceTime=function(b){var c,d,e,f,g,h,i;if(this.mPlaying&&!(0>=b)){if(d=this.mCurrentFrame,e=0,f=!1,g=this.hasEventListener(a.Event.COMPLETE),h=!1,i=this.getTotalTime(),this.mLoop&&this.mCurrentTime==i&&(this.mCurrentTime=0,this.mCurrentFrame=0),this.mCurrentTime<i)for(this.mCurrentTime+=b,c=this.mTextures.length-1;this.mCurrentTime>this.mStartTimes[this.mCurrentFrame]+this.mDurations[this.mCurrentFrame]&&(this.mCurrentFrame==c?this.mLoop&&!g?(this.mCurrentTime-=i,this.mCurrentFrame=0):(f=!0,e=this.mCurrentTime-i,h=g,this.mCurrentFrame=c,this.mCurrentTime=i):(this.mCurrentFrame++,this.mCurrentFrame==c&&this.mCurrentTime==i&&(h=g)),this.mCurrentFrame!=d&&this.runFrameScript(),!f););this.mCurrentFrame!=d&&this._setTexture(this.mTextures[this.mCurrentFrame]),h&&this.dispatchEvent(new a.Event(a.Event.COMPLETE)),this.mLoop&&0!=e&&this.advanceTime(e)}},c.prototype.isComplete=function(){return!this.mLoop&&this.mCurrentTime>=this.getTotalTime()},c.prototype.getTotalTime=function(){var a=this.mTextures.length;return this.mStartTimes[Math.floor(a-1)]+this.mDurations[Math.floor(a-1)]},c.prototype.getCurrentTime=function(){return this.mCurrentTime},c.prototype.getNumFrames=function(){return this.mTextures.length},c.prototype.getLoop=function(){return this.mLoop},c.prototype.setLoop=function(a){this.mLoop=a},c.prototype.getCurrentFrame=function(){return this.mCurrentFrame+1},c.prototype.setCurrentFrame=function(a){a--,0>a&&(a=0),a>=this.getNumFrames()&&(a=this.getNumFrames()-1),this.mCurrentTime=0;for(var b=0;a>b;++b)this.mCurrentTime+=this.getFrameDuration(b);this.mCurrentFrame!=a&&(this.mCurrentFrame=a,this.runFrameScript(),this._setTexture(this.mTextures[this.mCurrentFrame]))},c.prototype.getFps=function(){return 1/this.mDefaultFrameDuration},c.prototype.setFps=function(a){var b,c,d,e;for(0>=a&&trace("Invalid fps: "+a),b=1/a,c=b/this.mDefaultFrameDuration,this.mCurrentTime*=c,this.mDefaultFrameDuration=b,d=0;d<this.getNumFrames();++d)e=this.mDurations[d]*c,this.mDurations[d]=e;this.updateStartTimes()},c.prototype.isPlaying=function(){return this.mPlaying?this.mLoop||this.mCurrentTime<this.getTotalTime():!1},c.prototype.runFrameScript=function(){var a=this.mFrameScript[this.mCurrentFrame];null!=a&&(a[1]=a[1]||this,a[0].call(a[1]))},c.prototype._getTexture=function(){return this.mTexture},c.prototype._setTexture=function(a){null==a?trace("Texture cannot be null"):a!=this.mTexture&&(this.mTexture=a,this.iv.loadTexture(this.mTexture,ccs.TextureResType.plist))},c}(a.WidgetEx);a.ImageViewMovieClip=b}(tx||(tx={})),function(a){var b=function(b){function c(a,c){b.call(this,a),this.gotoAndStop(1),this._frameNum=c,this._isEnable=!0,this._isNormal=!0,this.iniLock(),this.initEvent()}return __extends(c,b),c.prototype.iniLock=function(){this.getNumFrames()<=3||4==this._frameNum&&(this._isEnable=!1,this.gotoAndStop(4),this.widget.setTouchEnabled(!1))},c.prototype.goLock=function(){this.getNumFrames()>3&&this.gotoAndStop(4),this._isEnable=!1,this.widget.setTouchEnabled(!1)},c.prototype.unlock=function(){this._isEnable=!0,this.gotoAndStop(1),this.widget.setTouchEnabled(!0)},c.prototype.initEvent=function(b){"undefined"==typeof b&&(b=null),this.addEventListener(a.MouseTouchEvent.MOUSE_TOUCH_OVER,this.onMouseOver),this.addEventListener(a.MouseTouchEvent.MOUSE_TOUCH_OUT,this.onMouseOut),this.addEventListener(a.MouseTouchEvent.MOUSE_DOWN_TOUCH_BEGAN,this.onMousePress),this.addEventListener(a.MouseTouchEvent.MOUSE_UP_TOUCH_ENDED,this.onMouseRelease)},c.prototype.removeEvent=function(){this.removeEventListener(a.MouseTouchEvent.MOUSE_TOUCH_OVER,this.onMouseOver),this.removeEventListener(a.MouseTouchEvent.MOUSE_TOUCH_OUT,this.onMouseOut),this.removeEventListener(a.MouseTouchEvent.MOUSE_DOWN_TOUCH_BEGAN,this.onMousePress),this.removeEventListener(a.MouseTouchEvent.MOUSE_UP_TOUCH_ENDED,this.onMouseRelease)},c.prototype.onMouseOver=function(){this._isNormal&&this._isEnable,this._isEnable&&this.gotoAndStop(3)},c.prototype.onMouseOut=function(){this._isEnable&&this.gotoAndStop(1)},c.prototype.onMousePress=function(){this._isEnable&&(this.getNumFrames()>2?this.gotoAndStop(3):this.gotoAndStop(2)),this._isNormal&&this._isEnable},c.prototype.onMouseRelease=function(){this._isEnable&&this.gotoAndStop(2)},c.prototype.setIsEnable=function(a){this._isEnable=a},c.prototype.setIsNormal=function(a){this._isNormal=a},c.prototype.isEnable=function(){return this._isEnable},c}(a.ImageViewMovieClip);a.ImageViewExButton=b}(tx||(tx={})),function(a){var b=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(cc.AffineTransform);a.Matrix=b}(tx||(tx={})),function(a){var b=function(){function b(){}return b.SET_COLOR_4B_BY_UINT=function(a,b,c){a.setDrawColor4B((b>>>16)%256,(b>>>8)%256,(b>>>0)%256,c)},b.COLOR_4F=function(a,b){return"undefined"==typeof b&&(b=1),new cc.Color4F((a>>>16)%256/255,(a>>>8)%256/255,(a>>>0)%256/255,b)},b.COLOR_4B_Trans=function(a,b){return new cc.Color4B((a>>>16)%256,(a>>>8)%256,(a>>>0)%256,b?(a>>>24)%256:255)},b.COLOR_3B=function(a){return new cc.Color3B((a>>>16)%256,(a>>>8)%256,(a>>>0)%256)},b.COLOR_4B=function(a){return new cc.Color4B((a>>>16)%256,(a>>>8)%256,(a>>>0)%256,(a>>>24)%256)},b.C4B_TO_UINT=function(a){return b.COLOR_4B_TO_UINT(a.r,a.g,a.b,a.a)},b.C3B_TO_UINT=function(a){return b.COLOR_3B_TO_UINT(a.r,a.g,a.b)},b.COLOR_4B_TO_UINT=function(a,b,c,d){return 16777216*d+65536*a+256*b+c},b.COLOR_3B_TO_UINT=function(a,b,c){return 65536*a+256*b+c},b.UINT_TO_3STRING=function(a){var c,b=a.toString(16);for(c=b.length;6>c;c++)b="0"+b;return b},b.CheckPosInMenuRect=function(a,b){var c=a.convertToNodeSpace(b),d=a.rect();return d.x=0,d.y=0,cc.rectContainsPoint(d,c)},b.CheckPosInMenuRect2=function(a,b,c){var d,e;return"undefined"==typeof c&&(c=0),d=a.convertToNodeSpace(b),e=a.rect(),e.x=0-c,e.y=0-c,e.width+=c+c,e.height+=c+c,cc.rectContainsPoint(e,d)},b.SetOpacity=function(a,c){var d,e;for(null!=a.setOpacity&&a.setOpacity(c),d=a.getChildren(),e=0;e<d.length;e++)b.SetOpacity(d[e],c)},b.FadeOutAndRemoveFromParent=function(a,c){var g,h,d=function(a,b){a.removeFromParent(b)},e=function(){return d},f=cc.Sequence.create(cc.FadeOut.create(c),cc.CallFunc.create(e(),a,!0));for(a.runAction(f),g=a.getChildren(),h=0;h<g.length;h++)b.AllFadeOut(g[h],c)},b.AllFadeIn=function(a,c){var d,e,f;for(null!=a.setOpacity&&(a.setOpacity(0),d=cc.FadeIn.create(c),a.runAction(d)),e=a.getChildren(),f=0;f<e.length;f++)b.AllFadeIn(e[f],c)},b.AllFadeOut=function(a,c){var d,e,f;for(null!=a.setOpacity&&(d=cc.FadeOut.create(c),a.runAction(d)),e=a.getChildren(),f=0;f<e.length;f++)b.AllFadeOut(e[f],c)},b.MaxPoint=function(a,b){var c=new cc.Point(0,0);return c.x=a.x>b.x?a.x:b.x,c.y=a.y>b.y?a.y:b.y,c},b.MinPoint=function(a,b){var c=new cc.Point(0,0);return c.x=a.x<b.x?a.x:b.x,c.y=a.y<b.y?a.y:b.y,c},b.GetRectScale=function(a,b){var c=b.x/a.x,d=b.y/a.y;return d>c?c:d},b.GetRealPixBitmapData=function(b){var c,i,j,k,l,m,n,d=b.getData(),e=b.getWidth(),f=b.getHeight(),g=new cc.Point(e,f),h=new cc.Point(0,0);for(i=0;e>i;i++)for(j=0;f>j;j++)k=d[4*(j*e+i)+3],0!=k&&(h=a.Utils.MaxPoint(h,new cc.Point(i,j)),g=a.Utils.MinPoint(g,new cc.Point(i,j)));for(l=h.x-g.x,m=h.y-g.y,c=new a.BitmapData(l,m,!0,0),n=c.getData(),i=0;l>i;i++)for(j=0;m>j;j++)n[4*(j*l+i)]=d[4*((j+g.y)*e+i+g.x)],n[4*(j*l+i)+1]=d[4*((j+g.y)*e+i+g.x)+1],n[4*(j*l+i)+2]=d[4*((j+g.y)*e+i+g.x)+2],n[4*(j*l+i)+3]=d[4*((j+g.y)*e+i+g.x)+3];return c.setData(n),c},b.removeFullPathForFilename=function(a){var d,e,f,b=cc.FileUtils.getInstance().getSearchResolutionsOrder(),c=cc.FileUtils.getInstance().getSearchPath();for(d in b)a=a.replace(b[d]+"/","");for(e in c)f=c[e],f.length>0&&f.lastIndexOf("/")!==f.length-1&&(f+="/"),a=a.replace(f,"");return a},b.GetXmlDoc=function(a){var b=cc.FileUtils.getInstance().fullPathForFilename(a),c=cc.SAXParser.getInstance().getList(b),d=cc.SAXParser.getInstance()._parserXML(c,a),e=d.documentElement;return e},b.FixedStringNum=function(a,b){var d,c=""+a;for(d=c.length;b>d;d++)c="0"+c;return c},b}();a.Utils=b}(tx||(tx={})),function(a){var b=function(){function b(){}return b.addSpriteFrames=function(a){"undefined"==typeof a&&(a=null),null==a||b.plistAddCache[a]||(cc.SpriteFrameCache.getInstance().addSpriteFrames(a),b.plistAddCache[a]=!0)},b.getSprite=function(a,c){"undefined"==typeof c&&(c=null),b.addSpriteFrames(c);var d=cc.SpriteFrameCache.getInstance().getSpriteFrame(a);return void 0!=d?cc.Sprite.createWithSpriteFrameName(a):cc.Sprite.create(a)},b.getInteractiveSprite=function(c,d,e){var f,g;return"undefined"==typeof d&&(d=null),"undefined"==typeof e&&(e=12),b.addSpriteFrames(d),f=cc.SpriteFrameCache.getInstance().getSpriteFrame(c),g=cc.TextureCache.getInstance().textureForKey(c),void 0!=f?a.InteractiveSprite.createWithSpriteFrame(f):void 0!=g?a.InteractiveSprite.createWithTexture(g):b.getMovieClip(c,d,e)},b.getMovieClip=function(b,c,d){var e,f;if("undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=12),null==c&&(c=a.TextureAtlas.FindPlistInDict(b)),null==c)throw new Error("plistName is null, name = "+b);if(e=new a.TextureAtlas(c),f=e.getTextures(b),f.length>0)return new a.MovieClip(f,d);throw new Error("have not MovieClip"+b)},b.getBitmapData=function(c,d,e){var f,g,h,i,j;return"undefined"==typeof d&&(d=!1),"undefined"==typeof e&&(e=null),d&&(b.bitMapDataArray||(b.bitMapDataArray={}),null!=b.bitMapDataArray[c])?b.bitMapDataArray[c]:(g=cc.p(0,0),e instanceof cc.Node?f=e:e instanceof cc.SpriteFrame?(f=cc.Sprite.createWithSpriteFrame(e),g=e.getOffset()):(b.addSpriteFrames(e),h=cc.SpriteFrameCache.getInstance().getSpriteFrame(c),void 0!=h?(f=cc.Sprite.createWithSpriteFrameName(c),g=h.getOffset()):f=cc.Sprite.create(c)),f.setAnchorPoint(cc.p(0,1)),i=f.getBoundingBox(),j=new a.BitmapData(i.width,i.height,!0,0),j.draw(f,new a.Matrix(1,0,0,1,-g.x,-g.y)),d&&(b.bitMapDataArray[c]=j),j)},b.clearBitmapDataCache=function(){for(var a=0;a<b.bitMapDataArray.length;a++)b.bitMapDataArray[a][1].dispose();b.bitMapDataArray={}},b.bitMapDataArray={},b.plistAddCache={},b}();a.Attach=b}(tx||(tx={})),function(a){var c,b=function(){function a(){}return a.init=function(b){a.gameName=b,a.sharedObjectInited=!0},a.getGlobal=function(b){var d=a.PREFIX+"_"+a.GLOBAL+"_"+b,e=JSON.parse(localStorage.getItem(d));return new c(d,e)},a.getLocal=function(b){var d=a.PREFIX+"_"+a.gameName+"_"+b,e=JSON.parse(localStorage.getItem(d));return new c(d,e)},a.save=function(b){var c=b.data;a.removeNOSaveObject(c)},a.registerClassAlias=function(){},a.removeNOSaveObject=function(b){var c,d,e,f;if(-1!=a.saveObjectCashed.indexOf(b))return null;a.saveObjectCashed.push(b),c=new Object,d=Boolean,e=String;for(f in b)trace("-------"+b[f]+"-------"+f+"--------------"),null==b[f]&&trace("This is an null"),void 0==b[f]?trace("This is an undefined"):b[f].constructor==Array?trace("This is an Array"):b[f].constructor==d?trace("This is an Boolean"):b[f].constructor==e?trace("This is an String"):b[f].constructor==Number?trace("This is an Number"):b[f].constructor==Object?trace("This is an Object"):trace("This is an Class");return c},a.PREFIX="RiverRunGames",a.GLOBAL="global",a.saveObjectCashed=[],a}();a.SharedObjectUtil=b,c=function(){function a(a,b){this.data=b,null==this.data&&(this.data=new Object),this.keyName=a}return a}(),a.SharedObject=c}(tx||(tx={})),function(a){var b=function(){function a(){}return a.prototype.destroy=function(){},a.prototype.getDistance=function(){return 0},a.prototype.getPointByDistance=function(a){return null},a.prototype.getRotationByDistance=function(a){return 0},a.prototype.startPoint=function(){return null},a.prototype.endPoint=function(){return null},a.prototype.setDebugMc=function(){},a}();a.AbstractRail=b}(tx||(tx={})),function(a){var b=function(){function a(a){"undefined"==typeof a&&(a=0),this.distance=a}return a.prototype.destroy=function(){this._tdebugMc&&(this._tdebugMc.getParent().removeChild(this._tdebugMc),this._tdebugMc=null),this.railMap=null},a.prototype.forward=function(a){this.railMap&&(this.distance+=a)},a.prototype.back=function(a){this.railMap&&(this.distance-=a)},a.prototype.isDerailed=function(){if(!this.railMap)return 1;if(!this.railMap.isCircular){if(this.distance>this.railMap.totalDistance)return 1;if(this.distance<0)return-1}return 0},a.prototype.print=function(){this._tdebugMc&&(this._tdebugMc.setPosition(this.getX(),this.getY()),this._tdebugMc.setRotation(this.getRotation()))},a.prototype.getX=function(){return null==this.railMap?0:this.railMap.getPoint(this).x},a.prototype.getY=function(){return null==this.railMap?0:this.railMap.getPoint(this).y},a.prototype.getRotation=function(){return null==this.railMap?0:this.railMap.getRotation(this)},a.prototype.setDebugMc=function(a){this._tdebugMc=new cc.Node,a.addChild(this._tdebugMc),this.print()},a}();a.Car=b}(tx||(tx={})),function(a){var b=function(b){function c(c,d,e,f,g,h){b.call(this),this.p0=new a.mVector(c,d),this.p1=new a.mVector(e,f),this.p2=new a.mVector(g,h),this.block()}return __extends(c,b),c.prototype.block=function(){var b,d,e;for(this.blockLengthArr=new Array,this._partT=1/((this.p1.minus(this.p0).getLength()+this.p2.minus(this.p1).getLength())/c.MINI_BLOCK),this._distance=0,b=new a.mVector(this.p0.x,this.p0.y),d=new a.mVector(0,0),e=this._partT;1>e;e+=this._partT)d.x=this.p0.x*Math.pow(1-e,2)+2*this.p1.x*e*(1-e)+this.p2.x*e*e,d.y=this.p0.y*Math.pow(1-e,2)+2*this.p1.y*e*(1-e)+this.p2.y*e*e,this.blockLengthArr.push(d.minus(b).getLength()),this._distance+=d.minus(b).getLength(),b=d.clone()},c.prototype.destroy=function(){this._tdebugMc&&(this._tdebugMc.getParent().removeChild(this._tdebugMc),this._tdebugMc=null),this.p0=null,this.p1=null,this.p2=null,this.blockLengthArr=null},c.prototype.getDistance=function(){return this._distance},c.prototype.getPointByDistance=function(b){var c,d,e,f;if(b>=this.getDistance())return this.p2;if(0>=b)return this.p0;for(c=0,d=0;d<this.blockLengthArr.length;d++)if(c+=this.blockLengthArr[d],c>=b)return e=d*this._partT,f=new a.mVector(0,0),f.x=this.p0.x*Math.pow(1-e,2)+2*this.p1.x*e*(1-e)+this.p2.x*e*e,f.y=this.p0.y*Math.pow(1-e,2)+2*this.p1.y*e*(1-e)+this.p2.y*e*e,f;return this.p2},c.prototype.getRotationByDistance=function(b){var c,d,e,f,g;if(b>=this.getDistance())return this.p2.minus(this.p1).getAngle();if(0>=b)return this.p1.minus(this.p0).getAngle();for(c=0,d=0;d<this.blockLengthArr.length;d++)if(c+=this.blockLengthArr[d],c>=b)return e=d*this._partT,f=new a.mVector(0,0),g=new a.mVector(0,0),f.x=this.p0.x+(this.p1.x-this.p0.x)*e,f.y=this.p0.y+(this.p1.y-this.p0.y)*e,g.x=this.p1.x+(this.p2.x-this.p1.x)*e,g.y=this.p1.y+(this.p2.y-this.p1.y)*e,g.minus(f).getAngle();return this.p2.minus(this.p1).getAngle()},c.prototype.startPoint=function(){return this.p0},c.prototype.endPoint=function(){return this.p2},c.prototype.setDebugMc=function(a){this._tdebugMc=new cc.Node,a.addChild(this._tdebugMc)},c.MINI_BLOCK=1,c}(a.AbstractRail);a.CurveRail=b}(tx||(tx={})),function(a){var b=function(b){function c(c,d,e,f){b.call(this),this.sp=new a.mVector(c,d),this.ep=new a.mVector(e,f)}return __extends(c,b),c.prototype.destroy=function(){this._tdebugMc&&(this._tdebugMc.getParent().removeChild(this._tdebugMc),this._tdebugMc=null),this.sp=null,this.ep=null},c.prototype.getDistance=function(){return this.ep.minus(this.sp).getLength()},c.prototype.getPointByDistance=function(a){if(a>=this.getDistance())return this.ep;if(0>=a)return this.sp;var b=this.ep.minus(this.sp);return b.setLength(a),b.plusEquals(this.sp)},c.prototype.getRotationByDistance=function(a){return this.ep.minus(this.sp).getAngle()},c.prototype.startPoint=function(){return this.sp},c.prototype.endPoint=function(){return this.ep},c.prototype.setDebugMc=function(a){this._tdebugMc=new cc.Node,a.addChild(this._tdebugMc)},c}(a.AbstractRail);a.LineRail=b}(tx||(tx={})),function(a){var b=function(){function b(a){"undefined"==typeof a&&(a=null),b.__debug__&&(this._debugMc=new cc.Node,a.addChild(this._debugMc)),this.isCircular=!1,this._railArr=[]}return b.prototype.destroy=function(){for(var a=0;a<this._railArr.length;a++)this._railArr[a].destroy();this._railArr=null,this._debugMc&&(this._debugMc.getParent().removeChild(this._debugMc),this._debugMc=null)},b.prototype.addCar=function(a){a.railMap=this,b.__debug__&&this._debugMc&&a.setDebugMc(this._debugMc)},b.prototype.setRails=function(a){var c,d;for(this.totalDistance=0,this._railArr=[],c=0;c<a.length;c++)d=a[c],d&&(this._railArr.push(d),b.__debug__&&this._debugMc&&d.setDebugMc(this._debugMc),this.totalDistance+=d.getDistance())},b.prototype.getRails=function(){return this._railArr},b.prototype.getPoint=function(b){var c,d,e,f;if(!this._railArr||0==this._railArr.length)return new a.mVector;if(b.isDerailed()<0)return this._railArr[0].getPointByDistance(0);if(b.isDerailed()>0)return this._railArr[this._railArr.length-1].getPointByDistance(this._railArr[this._railArr.length-1].getDistance());for(c=b.distance%this.totalDistance,c=c>=0?c:this.totalDistance+c,d=0,e=0;e<this._railArr.length;e++)if(f=this._railArr[e],d+=f.getDistance(),d>c)return f.getPointByDistance(c-(d-f.getDistance()));return new a.mVector},b.prototype.getRotation=function(a){var b,c,d,e;if(!this._railArr||0==this._railArr.length)return 0;if(a.isDerailed()<0)return this._railArr[0].getRotationByDistance(0);if(a.isDerailed()>0)return this._railArr[this._railArr.length-1].getRotationByDistance(this._railArr[this._railArr.length-1].getDistance());for(b=a.distance%this.totalDistance,b=b>=0?b:this.totalDistance+b,c=0,d=0;d<this._railArr.length;d++)if(e=this._railArr[d],c+=e.getDistance(),c>b)return e.getRotationByDistance(b-(c-e.getDistance()));return 0},b.__debug__=!1,b}();a.RailMap=b}(tx||(tx={})),s_HelloWorld="HelloWorld.png",s_CloseNormal="CloseNormal.png",s_CloseSelected="CloseSelected.png",s_crystalsList="crystals.plist",s_crystalsPng="crystals.png",s_gameAni_List="gameAni.plist",s_gameAni="gameAni.png",g_resources=[{src:s_HelloWorld},{src:s_CloseNormal},{src:s_CloseSelected},{src:s_crystalsList},{src:s_gameAni_List},{src:s_gameAni},{src:s_crystalsPng}],TestAttach=function(){function a(a){this._root=a,this.testGetSprite(),this.testGetBitmapData()}return a.prototype.testGetBitmapData=function(){var a=new tx.Bitmap(tx.Attach.getBitmapData("crystals/0.png",!0,s_crystalsList));a.setPosition(cc.p(200,200)),this._root.addChild(a),a=new tx.Bitmap(tx.Attach.getBitmapData(s_crystalsPng)),a.setPosition(cc.p(400,100)),this._root.addChild(a),a=new tx.Bitmap(tx.Attach.getBitmapData("aaaa",!0,tx.Attach.getSprite("crystals/0.png",s_crystalsList))),a.setPosition(cc.p(300,200)),this._root.addChild(a)},a.prototype.testGetSprite=function(){var a=tx.Attach.getSprite("crystals/0.png",s_crystalsList);a.setPosition(cc.p(200,200)),this._root.addChild(a),a=tx.Attach.getSprite(s_crystalsPng),a.setPosition(cc.p(400,100)),this._root.addChild(a)},a.prototype.test1=function(){var a,b,c;cc.SpriteFrameCache.getInstance().addSpriteFrames(s_crystalsList),a=s_crystalsPng,b=cc.SpriteFrameCache.getInstance().getSpriteFrame(a),c=void 0!=b?cc.Sprite.createWithSpriteFrameName("crystals/0.png"):cc.Sprite.create(a),c.setPosition(cc.p(200,200)),this._root.addChild(c)},a}(),TestEvent=function(){function a(a){this._root=a;var b=new tx.EventDispatcher;b.addEventListener("event",this.listnerHander,this),b.dispatchEvent(new tx.Event("event")),b.removeEventListener("event",this.listnerHander),trace("removeOK"),b.dispatchEvent(new tx.Event("event"))}return a.prototype.listnerHander=function(a){trace("onHander",a.listener._root),trace("onHander2",this._root)},a}(),TestBitmap=function(){function a(a){this._root=a,this.testMouseEvent()}return a.prototype.testMouseEvent=function(){var a=new tx.Bitmap(tx.Attach.getBitmapData("crystals/0.png",!0,s_crystalsList));a.setPosition(cc.p(200,200)),a.setMouseTouchEnabled(!0),a.addEventListener(tx.MouseTouchEvent.MOUSE_DOWN_TOUCH_BEGAN,this.onMouseTouchBegin),a.addEventListener(tx.MouseTouchEvent.MOUSE_UP_TOUCH_ENDED,this.onMouseTouchEnded),a.addEventListener(tx.MouseTouchEvent.MOUSE_DRAGGED_TOUCH_MOVE,this.onMouseTouchMove),a.addEventListener(tx.MouseTouchEvent.MOUSE_TOUCH_OVER,this.onMouseTouchOver),a.addEventListener(tx.MouseTouchEvent.MOUSE_TOUCH_OUT,this.onMouseTouchOut),tx.DragObject.SetToDragObject(a),this._root.addChild(a)},a.prototype.onMouseTouchBegin=function(){trace("testBitmap","onMouseTouchBegin")},a.prototype.onMouseTouchEnded=function(){trace("testBitmap","onMouseTouchEnded")},a.prototype.onMouseTouchMove=function(){trace("testBitmap","onMouseTouchMove")},a.prototype.onMouseTouchOver=function(){trace("testBitmap","onMouseTouchOver")
},a.prototype.onMouseTouchOut=function(){trace("testBitmap","onMouseTouchOut")},a.prototype.testOpacity=function(){var b,a=new tx.Bitmap(tx.Attach.getBitmapData("crystals/0.png",!0,s_crystalsList));a.setPosition(cc.p(200,200)),a.setCascadeOpacityEnabled(!0),a.setOpacity(127),b=new tx.Bitmap(tx.Attach.getBitmapData(s_crystalsPng)),b.setPosition(cc.p(200,0)),b.setOpacity(127),a.addChild(b),this._root.addChild(a)},a}(),testMovieClip=function(){function a(a){var b=this;this.textAtlas=[],this.iii=0,this._root=a,this.testAttachMovieClip(),this._root.schedule(function(){b.run()})}return a.prototype.run=function(){this.iii++;var a=new Date;trace(a.getTime())},a.prototype.testAttachMovieClip=function(){var a;for(this._testMovieClip=tx.Attach.getInteractiveSprite("guoBg",null,1e3),this._testMovieClip.setPosition(200,300),this._testMovieClip.setAnchorPoint(cc.p(0,1)),this._root.addChild(this._testMovieClip),a=0;a<this._testMovieClip.getNumFrames();a+=2)this._testMovieClip.addFrameScript(a,function(a){var b=this;return function(){trace("ffffff",a,b.iii)}}(a),this);for(a=0;a<this._testMovieClip.getNumFrames();a+=2)this._testMovieClip.addFrameScript(a,this.frameFun,this)},a.prototype.testMovieClip=function(){var b,a=new tx.TextureAtlas(s_gameAni_List);for(this._testMovieClip=new tx.MovieClip(a.getTextures("guoBg")),this._testMovieClip.setPosition(200,300),this._testMovieClip.setAnchorPoint(cc.p(0,1)),this._root.addChild(this._testMovieClip),b=0;b<this._testMovieClip.getNumFrames();b+=2)this._testMovieClip.addFrameScript(b,function(a){var b=this;return function(){trace("ffffff",a,b.iii)}}(b),this);for(b=0;b<this._testMovieClip.getNumFrames();b+=2)this._testMovieClip.addFrameScript(b,this.frameFun,this)},a.prototype.frameFun=function(){trace(this.iii)},a.prototype.runTestMovieClips=function(){this._testMovieClip.advanceTime(1/30),this._testMovieClip.gotoAndStop(this.iii)},a.prototype.testTextureAtlas=function(){var b,a=new tx.TextureAtlas(s_gameAni_List);this.textAtlas=a.getTextures("guoBg"),b=this.textAtlas[0],this.ll=cc.Sprite.createWithSpriteFrame(b),this.ll.setPosition(200,300),this.ll.setAnchorPoint(cc.p(0,1)),this._root.addChild(this.ll)},a.prototype.runTestTextureAtlas=function(){this.ll.setDisplayFrame(this.textAtlas[this.iii])},a}(),testInteractiveSprite=function(){function a(a){this._root=a,this.testMouseEvent()}return a.prototype.testMouseEvent=function(){var a=tx.Attach.getInteractiveSprite("guoBg0150");a.setPosition(cc.p(200,200)),a.setMouseTouchEnabled(!0),a.addEventListener(tx.MouseTouchEvent.MOUSE_DOWN_TOUCH_BEGAN,this.onMouseTouchBegin),a.addEventListener(tx.MouseTouchEvent.MOUSE_UP_TOUCH_ENDED,this.onMouseTouchEnded),a.addEventListener(tx.MouseTouchEvent.MOUSE_DRAGGED_TOUCH_MOVE,this.onMouseTouchMove),a.addEventListener(tx.MouseTouchEvent.MOUSE_TOUCH_OVER,this.onMouseTouchOver),a.addEventListener(tx.MouseTouchEvent.MOUSE_TOUCH_OUT,this.onMouseTouchOut),tx.DragObject.SetToDragObject(a),this._root.addChild(a)},a.prototype.onMouseTouchBegin=function(){trace("testBitmap","onMouseTouchBegin")},a.prototype.onMouseTouchEnded=function(){trace("testBitmap","onMouseTouchEnded")},a.prototype.onMouseTouchMove=function(){trace("testBitmap","onMouseTouchMove")},a.prototype.onMouseTouchOver=function(){trace("testBitmap","onMouseTouchOver")},a.prototype.onMouseTouchOut=function(){trace("testBitmap","onMouseTouchOut")},a}(),TestSharedObject=function(){function a(a){this._root=a,this.test2()}return a.prototype.test2=function(){tx.SharedObjectUtil.init("GAMENAME111"),this._so=tx.SharedObjectUtil.getLocal("test1"),this._so.data.aaa=new testMovieClip(new cc.Node),this._so.data.bbb={a:1,b:2},this._so.data.ccc=111,this._so.data.ddd="ddd",this._so.data.eee=[1,2,3],this._so.data.fff=!0,this._so.data.ggg=void 0,this._so.data.hhh=0/0,this._so.data.iii=null,this._so.data.jjj="",tx.SharedObjectUtil.save(this._so)},a.prototype.test1=function(){tx.SharedObjectUtil.init("GAMENAME111"),this._so=tx.SharedObjectUtil.getLocal("test1"),trace(this._so.data.aaa),trace(this._so.data.bbb),this._so.data.aaa=1,this._so.data.bbb="aaaa",tx.SharedObjectUtil.save(this._so)},a}(),Root=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.init=function(){return a.prototype.init.call(this),new TestSharedObject(this),!0},b.prototype.run=function(){var a=new Date;trace(a.getTime()),trace("aaaaaaaa")},b}(cc.Layer),Stage=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.onEnter=function(){a.prototype.onEnter.call(this),cc.log("onEnter");var b=new Root;this.addChild(b),b.init()},b}(cc.Scene);